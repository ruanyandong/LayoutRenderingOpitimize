# Android布局渲染流程与优化
## xml布局显示到屏幕的流程
* xml(LayoutInflater加载进内存)——>控件对象包含一系列信息(cpu经过计算)——>处理为多维向量图形(cpu将图形交给GPU)——>GPU绘制图形(栅格化)
* CPU将UI对象转换为多维图形——>通过OPENGL调用GPU——>GPU对图形进行栅格化(上述步骤是否在16ms内完成，是则显示其直接显示，不是则垂直同步等待下一帧完成)
## 60Hz刷新频率由来
* 12fps:人类眼睛所看画面之帧率高于每秒约10-12帧，就认为是连贯的
* 24fps：有声电影的拍摄及播放帧率均为每秒24帧
* 60fps:在于手机交互过程中，60帧以下人能感觉出来，60帧以上不能察觉变化，当帧率低于60fps时感觉画面卡顿和迟钝现象
* Android系统每隔16ms发出VSYNC信号(1000ms/60=16.66ms),触发对UI进行渲染，如果每次渲染都成功这样就能够达到流畅的画面所需要的60fps，为了能够实现。      60fps，必须在16ms内完成。
## 卡顿原理分析
* 当这一帧画面渲染时间超过16ms的时候，垂直同步机制会让显示器硬件等待GPU完成栅格化渲染操作，这样会让这帧画面画面，多停留16ms，甚至更多，这样就会造成用户看起来画面停顿
* 16ms主要被两件事情占用：
      1、将UI对象转换为多边形和纹理
      2、CPU传递数据到GPU，GPU进行绘制
* 如何减少这两部分时间
      1、CPU减少xml转换成对象的时间（减少xml文件的层级）
      2、GPU减少重复绘制

    

